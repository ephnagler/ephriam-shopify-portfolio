---
import Layout from "../layouts/Layout.astro";
import Work from "../components/Work.astro";
---

<Layout>
  <div>
    <h1
      id="animated-title"
      class="mt-4 md:fixed bottom-0 right-8 opacity-0 translate-x-4 transition-all duration-1000"
    >
      Shopify Expert
    </h1>
  </div>
  <Work />

  <script>
    let hasAnimated = false;

    function animateTitle() {
      if (hasAnimated) return; // Prevent duplicate animations

      const title = document.getElementById("animated-title");
      if (title) {
        title.classList.remove("opacity-0", "translate-x-4");
        title.classList.add("opacity-100", "translate-x-0");
        hasAnimated = true;
      }
    }

    // Handle Astro view transitions (client-side navigation)
    document.addEventListener("astro:page-load", () => {
      hasAnimated = false; // Reset for new page
      setTimeout(animateTitle, 500);
    });

    // Handle initial page load
    setTimeout(animateTitle, 200);
  </script>
</Layout>
